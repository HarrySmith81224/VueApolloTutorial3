---
layout: post
title:  "Vue Apollo Tutorial"
date:   2023-10-26 08:13:05 +0000
categories: vue apollo
---

Open an empty folder in Visual Studio Code and open a new terminal.

In the terminal run the following command to install vue/cli, this will be needed to install further components.

```code
    npm install -g @vue/cli
```

this installation will take some time, but once it is completed we will be able to create a Vue application.

to do this, run the following command.

```code
   vue create vueapolloapp
```

the last part is the name of the app which will be created, for this we have chosen 'vueapolloapp' but you may name it what ever you like. (names with capital letters are not accepted)



after running this, a menu will appear.

```code
   Vue CLI v5.0.8
    ? Please pick a preset: (Use arrow keys)
    > Default ([Vue 3] babel, eslint)       
    Default ([Vue 2] babel, eslint)       
    Manually select features 
```

Choose the default option of Vue 3 by pressing Enter.

If it is created successfully the following will display:
```code
    âš“  Running completion hooks...

    ðŸ“„  Generating README.md...

    ðŸŽ‰  Successfully created project vueapolloapp.
    ðŸ‘‰  Get started with the following commands:

    $ cd vueapolloapp
    $ npm run serve
 ```

 Run the two commands above, the first changes the directory to the new app, the second will run it.

 After running the serve command an http address will display, clicking this will open your new Vue app.

```code
    App running at:
    - Local:   http://localhost:8080/
```
![image1](../../../../../images/T1.JPG)

Press control + C in the terminal to stop running the app.

Run this command to install the dependancies for apollo.
```code
    npm install --save graphql graphql-tag @apollo/client
```
Once completed, install the composition API.
```code
    npm install --save @vue/apollo-composable
```


At this point your app directory should look like this:

![image1](../../../../../images/T2.JPG)

Next open the main.js file in the src folder and replace the code with the following:

```code
    import { createApp, provide, h } from 'vue'
    import { DefaultApolloClient } from '@vue/apollo-composable'
    import { ApolloClient, InMemoryCache } from '@apollo/client/core'
    import App from './App.vue'

    const cache = new InMemoryCache()

    const apolloClient = new ApolloClient({
        cache,
        uri: 'https://rickandmortyapi.com/graphql',
    }) 

    const app = createApp ({
        setup () {
            provide(DefaultApolloClient, apolloClient)
        },

        render: () => h(App),
    })

    app.mount('#app');
```

As explained in the presentation, this code integrates Apollo Client into our vue app.

```code
    uri: 'https://rickandmortyapi.com/graphql',
```
this code links the client to a graphql database, in this case we are using one that is publicly available.

It contains a list of characters from a tv show, with names and images.


next open the App.vue file, delete the code within the template and script brackets, and then insert the following:

```code
<script>
import gql from 'graphql-tag'
import { useQuery } from '@vue/apollo-composable'

const CHARACTERS_QUERY = gql`
  query Characters {
    characters {
      results {
        id
        name
        image
      }
    }
  }
`

export default {
  name: 'App',
  setup () {
    const { result, loading, error } = useQuery(CHARACTERS_QUERY);
    return {
      result,
      loading, 
      error
    }
  }
}

</script>
```
The 'CHARACTERS_QUERY' segment sends a query to the database, which will respond with the id, name and image for each character.

the 'export default' segment sets up the three states that can occur: result, loading or error.

![image1](../../../../../images/T3.JPG)

This code checks which of the three states is occuring.

* If data is not retrieved from the database the error state will occur, displaying 'Something went wrong...'

* While the data is being loaded the loading state will occur, displaying 'loading...'

* If the data is successfully retrieved from the database, the result state will occur.

for each character in the database, the ID, name and image will be displayed in a list.

run the serve command.

```code
    npm run serve
```

If the instructions have been followed correctly, your page should look like this:

![image1](../../../../../images/T4.JPG)



You have successfully set up Vue with Apollo and displayed data from a graphql database!
